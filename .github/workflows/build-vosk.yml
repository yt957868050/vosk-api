  name: Build Vosk ARM64 JNI                                                                                                                                                        
                                                                                                                                                                                    
  on:                                                                                                                                                                               
    workflow_dispatch:                                                                                                                                                              
                                                                                                                                                                                    
  jobs:                                                                                                                                                                             
    build:                                                                                                                                                                          
      runs-on: ubuntu-22.04                                                                                                                                                         
                                                                                                                                                                                    
      steps:                                                                                                                                                                        
                                                                                                                                                       
                                                                                                                                                                                    
        # 再 checkout 官方 vosk-api                                                                                                                                                 
        - uses: actions/checkout@v4                                                                                                                                                 
          with:                                                                                                                                                                     
            repository: alphacep/vosk-api                                                                                                                                           
            ref: refs/tags/v0.3.45   # 也可写某个分支/commit                                                                                                                        
            submodules: true         # 需要 Kaldi/OpenFST 的话                                                                                                                      
            fetch-depth: 0           # 取完整历史、便于子模块递归                                                                                                                   
            path: vosk               # 放到指定子目录                                                                                                                               
                                                                                                                                                                                    
        - name: Build vosk                                                                                                                                                          
          working-directory: vosk                                                                                                                                                   
          run: |                                                                                                                                                                    
            make -C src                                                                                                                                                             
            make java  
